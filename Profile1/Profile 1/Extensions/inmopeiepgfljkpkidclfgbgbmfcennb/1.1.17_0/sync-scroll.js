"use strict";(()=>{var m="__@RESONSIVE_VIEWER_DONT_USE@__";var s=window[m];function A(e){let t=[];for(;e.parentElement!=null;){let n=0,o=0;for(let r=0;r<e.parentElement.childNodes.length;r++){let l=e.parentElement.childNodes[r];l.nodeName===e.nodeName&&(l===e&&(o=n),n++)}n>1?t.unshift(e.nodeName.toLowerCase()+":eq("+o+")"):t.unshift(e.nodeName.toLowerCase()),e=e.parentElement}return t}function _(e){return A(e).join(" > ")}var u="@RESPONSIVE-VIEWER";var i="https://responsiveviewer.org",D=`${i}/user/extension`,W=`${i}/user/session`,C=`${i}/user/uploads`,b=`${i}/api/feedback`,V=`${i}/uninstall`,H=`${i}/api/install`;var K=`${i}/login`,y=`${i}/dashboard`,G=`${i}/plugins`;var f=`__${u}/USER_SRCOLL__`,c=e=>window[f]=e,S=()=>window[f];var L=e=>{c(!1);function t(){e.active&&c(!0)}function n(){e.active&&c(!1)}window.addEventListener("keydown",o=>{if(!e.active)return;let r=["Space","PageUp","PageDown","ArrowUp","ArrowDown"],l=["Home","End"];(r.includes(o.code)||o.ctrlKey&&l.includes(o.code))&&c(!0)}),window.addEventListener("wheel",t,{passive:!1,capture:!0}),window.addEventListener("click",n,{capture:!0}),window.addEventListener("scroll",o=>{if(S()===!1){s.inform("FRAME_SCROLL_UNTRUSTED");return}if(!e.active||!o.target)return;let r=h(o.target);r?s.broadcast("FRAME_SCROLL",{scrollTop:r.scrollTop,scrollLeft:r.scrollLeft,path:_(r)}):s.broadcast("FRAME_SCROLL",{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft,path:""})},{capture:!0,passive:!0})},g=e=>e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight,R=new WeakMap,T=new WeakMap,h=e=>{let t=e,n=Date.now(),o=T.get(e)??0;if(n-o<3e3&&(t=R.get(e),t))return t;for(t=e;t&&!g(t);){if(!t.parentElement)return null;t=t.parentElement}return R.set(e,t),t};var d=e=>e?e.tagName==="svg"?e:e!==document.body&&e.parentElement?d(e.parentElement):null:null,w=e=>{let t=/(:eq\(.*?\))/gi;return e.trim().split(t).map(n=>{if(n.startsWith(":eq")){let o=n.match(/([0-9])/g);return o?parseInt(o.join("")):0}return n=n.trim(),n.startsWith(">")&&(n=`:scope ${n}`),n}).filter(n=>n!=="")};function a(e){let t=w(e),n=document.documentElement;for(;t.length>0;){let r=t.shift(),l=0;if(typeof t[0]=="number"&&(l=t.shift()),typeof r=="string"&&(l>0?n=n.querySelectorAll(r)[l]:n=n.querySelector(r)),!n)return null}if(!n)return;let o=d(n);return o?o.parentElement||o:n}var I={};function N(e){c(!1);let t=I[e.path]??(e.path&&a(e.path));t||(t=document.documentElement),I[e.path]=t,t.scrollTo({top:e.scrollTop,left:e.scrollLeft,behavior:"instant"})}var O=()=>{s.listen("FRAME_SCROLL",e=>{N(e)})};var p="sync scroll",E={active:!1};s.onPluginActivate(p,()=>{E.active=!0});s.onPluginDeActivate(p,()=>{E.active=!1});s.onPluginLoaded(p,e=>{E.active=e.active||!1});L(E);O();})();
